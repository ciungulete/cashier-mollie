<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>One-off charges | Laravel Cashier Mollie v2.x</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="apple-touch-icon" sizes="180x180" href="/cashier-mollie/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/cashier-mollie/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/cashier-mollie/favicon-16x16.png">
    <link rel="manifest" href="/cashier-mollie/manifest.json">
    <script src="https://cdn.usefathom.com/script.js" spa="auto" site="ANMLOYPH" defer="true"></script>
    <meta name="description" content="Laravel Cashier provides an expressive, fluent interface to subscriptions using Mollie's billing services.">
    <meta property="og:site_name" content="Laravel Cashier Mollie v2.x">
    <meta property="og:title" content="One-off charges">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.cashiermollie.com/04-oneoffcharges.html">
    <meta property="og:image" content="https://ciungulete.github.io/cashier-mollie/assets/pages/laravelcashiermollie.jpg">
    <meta name="twitter:title" content="One-off charges">
    <meta name="twitter:url" content="https://www.cashiermollie.com/04-oneoffcharges.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://ciungulete.github.io/cashier-mollie/assets/pages/laravelcashiermollie.jpg">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Mollie.com">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width">
    
    <link rel="preload" href="/cashier-mollie/assets/css/0.styles.85d7d458.css" as="style"><link rel="preload" href="/cashier-mollie/assets/js/app.50899b51.js" as="script"><link rel="preload" href="/cashier-mollie/assets/js/2.f1cc6911.js" as="script"><link rel="preload" href="/cashier-mollie/assets/js/12.52303bc0.js" as="script"><link rel="preload" href="/cashier-mollie/assets/js/3.c5a105dd.js" as="script"><link rel="prefetch" href="/cashier-mollie/assets/js/10.d0dfd006.js"><link rel="prefetch" href="/cashier-mollie/assets/js/11.31762be8.js"><link rel="prefetch" href="/cashier-mollie/assets/js/13.e7f9933f.js"><link rel="prefetch" href="/cashier-mollie/assets/js/14.de1adec5.js"><link rel="prefetch" href="/cashier-mollie/assets/js/15.7fc8ec73.js"><link rel="prefetch" href="/cashier-mollie/assets/js/16.7ea19247.js"><link rel="prefetch" href="/cashier-mollie/assets/js/17.d10157c9.js"><link rel="prefetch" href="/cashier-mollie/assets/js/18.2b60d376.js"><link rel="prefetch" href="/cashier-mollie/assets/js/19.60230e04.js"><link rel="prefetch" href="/cashier-mollie/assets/js/20.80b8ea15.js"><link rel="prefetch" href="/cashier-mollie/assets/js/4.910b7cda.js"><link rel="prefetch" href="/cashier-mollie/assets/js/5.36aa556b.js"><link rel="prefetch" href="/cashier-mollie/assets/js/6.dd96bc00.js"><link rel="prefetch" href="/cashier-mollie/assets/js/7.fe3fef82.js"><link rel="prefetch" href="/cashier-mollie/assets/js/8.ebb547cf.js"><link rel="prefetch" href="/cashier-mollie/assets/js/9.048f1141.js">
    <link rel="stylesheet" href="/cashier-mollie/assets/css/0.styles.85d7d458.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cashier-mollie/" class="home-link router-link-active"><img src="/cashier-mollie/assets/img/cashier-mollie.svg" alt="Laravel Cashier Mollie v2.x" class="logo"> <span class="site-name can-hide">Laravel Cashier Mollie v2.x</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/laravel/cashier-mollie" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/laravel/cashier-mollie" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/cashier-mollie/" aria-current="page" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cashier-mollie/01-instalation.html" class="sidebar-link">Installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cashier-mollie/01-instalation.html#setup" class="sidebar-link">Setup</a></li></ul></li><li><a href="/cashier-mollie/02-subscriptions.html" class="sidebar-link">Subscriptions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cashier-mollie/02-subscriptions.html#creating-subscriptions" class="sidebar-link">Creating subscriptions</a></li><li class="sidebar-sub-header"><a href="/cashier-mollie/02-subscriptions.html#checking-subscription-status" class="sidebar-link">Checking subscription status</a></li><li class="sidebar-sub-header"><a href="/cashier-mollie/02-subscriptions.html#cancelled-subscription-status" class="sidebar-link">Cancelled Subscription Status</a></li><li class="sidebar-sub-header"><a href="/cashier-mollie/02-subscriptions.html#changing-plans" class="sidebar-link">Changing Plans</a></li><li class="sidebar-sub-header"><a href="/cashier-mollie/02-subscriptions.html#subscription-quantity" class="sidebar-link">Subscription Quantity</a></li><li class="sidebar-sub-header"><a href="/cashier-mollie/02-subscriptions.html#subscription-taxes" class="sidebar-link">Subscription Taxes</a></li><li class="sidebar-sub-header"><a href="/cashier-mollie/02-subscriptions.html#subscription-anchor-date" class="sidebar-link">Subscription Anchor Date</a></li><li class="sidebar-sub-header"><a href="/cashier-mollie/02-subscriptions.html#cancelling-subscriptions" class="sidebar-link">Cancelling Subscriptions</a></li><li class="sidebar-sub-header"><a href="/cashier-mollie/02-subscriptions.html#resuming-subscriptions" class="sidebar-link">Resuming Subscriptions</a></li></ul></li><li><a href="/cashier-mollie/03-trials.html" class="sidebar-link">Subscription Trials</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cashier-mollie/03-trials.html#with-mandate-up-front" class="sidebar-link">With Mandate Up Front</a></li><li class="sidebar-sub-header"><a href="/cashier-mollie/03-trials.html#without-mandate-up-front" class="sidebar-link">Without Mandate Up Front</a></li></ul></li><li><a href="/cashier-mollie/04-oneoffcharges.html" aria-current="page" class="active sidebar-link">One-off charges</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cashier-mollie/04-oneoffcharges.html#adding-an-item-to-the-tab" class="sidebar-link">Adding an item to the tab</a></li><li class="sidebar-sub-header"><a href="/cashier-mollie/04-oneoffcharges.html#changing-when-the-items-on-the-tab-should-be-invoiced" class="sidebar-link">Changing when the items on the tab should be invoiced.</a></li><li class="sidebar-sub-header"><a href="/cashier-mollie/04-oneoffcharges.html#invoicing-items-on-the-tab" class="sidebar-link">Invoicing items on the tab</a></li><li class="sidebar-sub-header"><a href="/cashier-mollie/04-oneoffcharges.html#putting-one-item-on-the-tab-and-invoicing-it-immediately" class="sidebar-link">Putting one item on the tab and invoicing it immediately</a></li></ul></li><li><a href="/cashier-mollie/05-metered.html" class="sidebar-link">Metered billing</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cashier-mollie/06-customer.html" class="sidebar-link">Customer</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cashier-mollie/06-customer.html#updating-customer-payment-mandates" class="sidebar-link">Updating Customer payment mandates</a></li><li class="sidebar-sub-header"><a href="/cashier-mollie/06-customer.html#customer-balance" class="sidebar-link">Customer balance</a></li><li class="sidebar-sub-header"><a href="/cashier-mollie/06-customer.html#customer-locale" class="sidebar-link">Customer locale</a></li></ul></li><li><a href="/cashier-mollie/07-invoices.html" class="sidebar-link">Invoices</a></li><li><a href="/cashier-mollie/08-events.html" class="sidebar-link">Cashier Events</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cashier-mollie/09-webhook.html" class="sidebar-link">Webhook Event Handlers</a></li><li><a href="/cashier-mollie/10-testing.html" class="sidebar-link">Testing</a></li><li><a href="/cashier-mollie/11-faq.html" class="sidebar-link">F.A.Q.</a><ul class="sidebar-sub-headers"></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="one-off-charges"><a href="#one-off-charges" class="header-anchor">#</a> One-off charges</h1> <p>Sometimes you may want to have your customers pay for a one-time fee.
An example of this could be a lifetime license for you product.
In this scenario you simply wish to charge your customers once, and not set up a <a href="https://docs.mollie.com/payments/recurring" target="_blank" rel="noopener noreferrer">mandate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (which authorizes you to charge the client multiple times).
However, if the customer already has a valid mandate (because they are already on a subscription for example) we will use the mandate to charge the customer directly.
This means that the customer does not have to go through the payment screen again, which is user friendly.</p> <p>As you may have noticed already, the payment flow described above is quite similar to the payment flow of setting up a subscription.</p> <h2 id="adding-an-item-to-the-tab"><a href="#adding-an-item-to-the-tab" class="header-anchor">#</a> Adding an item to the tab</h2> <p>If you wish to add something to the next upcoming order (or invoice for that matter),
you can use the <code>tab</code> method on the model that is using the <code>Billable</code> trait.</p> <p>From here on we take the <code>$user</code> as our <code>Billable</code> model.</p> <blockquote><p><strong>Important note:</strong></p> <p>You can put items on the tab without having a valid mandate for the user.</p> <ul><li>When creating the invoice we will create a <code>RedirectToCheckoutResponse</code> if your customer doesn't have a valid mandate.</li> <li>When the user you are creating an order for already has a valid mandate, we will directly create the order.
The basic usage is as follows:</li></ul></blockquote> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Here 1000 is the amount in the smallest denomination for your default currency.</span>
<span class="token variable">$orderItem</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">tab</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'A description of the order item'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>If you wish to override any specific fields on the order item you can pass them as the third parameters:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$orderItem</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">tab</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'A potato, not very premium'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'currency'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'USD'</span><span class="token punctuation">,</span> <span class="token comment">// a non-default currency</span>
    <span class="token single-quoted-string string">'description_extra_lines'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'This potato was almost rotten... but still delicious.'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The order items that you put on the tab can be manually invoiced <a href="#invoicing-items-on-the-tab">using the <code>invoice</code> method</a>.
If you only wish to put one item on the tab and invoice it immediately <a href="#putting-one-item-on-the-tab-and-invoicing-it-immediately">have a look at <code>invoiceFor</code></a>.</p> <blockquote><p><strong>Important note:</strong></p> <p>Since <code>php artisan cashier:run</code> is usually scheduled to run daily, items you put on the tab (but don't immediately invoice) will be invoiced automatically.
If this is not what you want, <a href="changing-when-the-items-on-the-tab-should-be-invoiced">change the time the order item on the tab is processed.</a></p></blockquote> <h2 id="changing-when-the-items-on-the-tab-should-be-invoiced"><a href="#changing-when-the-items-on-the-tab-should-be-invoiced" class="header-anchor">#</a> Changing when the items on the tab should be invoiced.</h2> <p>Since usually you have set <code>php artisan cashier:run</code> to run daily in your <code>App\Console\Kernel@schedule</code> method, the order items you put on the tab will be invoiced today/tomorrow.
If this is not what you want, override the <code>process_at</code> property.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// On the first day of the month</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">tab</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Lifetime license for Product A'</span><span class="token punctuation">,</span> <span class="token number">35000</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'process_at'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">endOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">startOfDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// On the second day of the month</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">tab</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Lifetime license for Product B'</span><span class="token punctuation">,</span> <span class="token number">35000</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'process_at'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">endOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">startOfDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Cashier will automatically group the open tab (order items) in one order when it runs at the last day of the month.</p> <p>You now have the possibility to put multiple items on the tab, and invoice them together at a later point in time!</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">invoiceFor</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Something'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token comment">// Optional. Is the default, will be used if there is no mandate, handles payment webhook.</span>
    <span class="token single-quoted-string string">'webhookUrl'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'cashier.one_off_payment.webhook_url'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// Optional. Is the default, will be used by Mollie if there is no mandate, after the user has paid.</span>
    <span class="token single-quoted-string string">'redirectUrl'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'cashier.one_off_payment.redirect_url'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token comment">// Optional. Default =&gt; null or empty array, which let's Mollie decide.</span>
    <span class="token single-quoted-string string">'method'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'cashier.one_off_payment.active_payment_methods'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// Optional. @see Cashier::getLocale()</span>
    <span class="token single-quoted-string string">'locale'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Cashier<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// Optional. Description on the payment. Will be shown on the bank statement.</span>
    <span class="token comment">// Default =&gt; $items-&gt;pluck('description')-&gt;implode(', )</span>
    <span class="token single-quoted-string string">'description'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'An alternative payment description than &quot;Something&quot;'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="invoicing-items-on-the-tab"><a href="#invoicing-items-on-the-tab" class="header-anchor">#</a> Invoicing items on the tab</h2> <p>If you wish to try to invoice open items on the tab immediately, you can use the <code>invoice</code> method.
Calling the invoice method will collect all open order items (the open tab) that are due for processing and puts them on an order.
If you leave the currency unspecified it will try to invoice the default currency.</p> <h3 id="inspecting-the-current-open-tab"><a href="#inspecting-the-current-open-tab" class="header-anchor">#</a> Inspecting the current open tab</h3> <p>To check what the order (+ invoice) would look like of you were to call the <code>invoice</code> method now, you can use the <code>upcomingInvoice</code> method.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Simple, default currency.</span>
<span class="token variable">$order</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">upcomingInvoice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$invoice</span> <span class="token operator">=</span> <span class="token variable">$order</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">invoice</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'concept'</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Other currency than default.</span>
<span class="token variable">$order</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">upcomingInvoice</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'currency'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'USD'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>If you like what you see, you can call the <code>invoice</code> method.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">invoice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="invoicing-the-items-in-default-currency-on-the-tab"><a href="#invoicing-the-items-in-default-currency-on-the-tab" class="header-anchor">#</a> Invoicing the items in default currency on the tab</h3> <p>If you wish to invoice the items in the default currency simply call the <code>invoice</code> method.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">invoice</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'description'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Something that will get on invoice &amp; user bank records.'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$result</span> <span class="token operator">===</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// There was no open tab due for processing in the currency you tried to invoice.</span>
<span class="token punctuation">}</span> <span class="token keyword">elseif</span> <span class="token punctuation">(</span><span class="token function">is_a</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">,</span> RedirectRedirectToCheckoutResponse<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// The user has an open tab, redirect to Mollie to let them pay for it.</span>
    <span class="token comment">// After the user successfully paid, we will create an Order for it.</span>
    <span class="token keyword">return</span> <span class="token variable">$result</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">elseif</span> <span class="token punctuation">(</span><span class="token function">is_a</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">,</span> Order<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// The user had an open tab and a valid mandate.</span>
    <span class="token comment">// We used the mandate to invoice them, and create an Order (+ Invoice).</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="invoicing-the-items-in-a-different-currency-than-the-default"><a href="#invoicing-the-items-in-a-different-currency-than-the-default" class="header-anchor">#</a> Invoicing the items in a different currency than the default</h3> <p>If you wish to invoice the items on the tab that are not in the default currency, you can pass the currency.
The rest of the steps are the same as invoicing in the default currency.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$invoice</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">invoice</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'currency'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'USD'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="putting-one-item-on-the-tab-and-invoicing-it-immediately"><a href="#putting-one-item-on-the-tab-and-invoicing-it-immediately" class="header-anchor">#</a> Putting one item on the tab and invoicing it immediately</h2> <p>If you wish to put one item on the tab and invoice it immediately, you can use the <code>invoiceFor</code> method.
This is basically a shortcut for using <code>tab</code> and <code>invoice</code> consecutively.</p> <p>If something like the following is your scenario:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$orderItem</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">tab</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Premium item'</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'currency'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'USD'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'description_extra_lines'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'Extra line'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'Another line'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">invoice</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'currency'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'USD'</span><span class="token punctuation">,</span>
    <span class="token comment">// Note: the description will be visible on the invoice &amp; customer bank records.</span>
    <span class="token single-quoted-string string">'description'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Lifetime license for my product'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Do the invoice handling like documented at the `invoice` method.</span>
</code></pre></div><p>You may rewrite this as:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">invoiceFor</span><span class="token punctuation">(</span>
    <span class="token single-quoted-string string">'Premium item'</span><span class="token punctuation">,</span>
    <span class="token number">30000</span><span class="token punctuation">,</span>
    <span class="token comment">// Order item options (same as 3rd parameter of `tab`)</span>
    <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'currency'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'USD'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'description_extra_lines'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
            <span class="token single-quoted-string string">'Extra line'</span><span class="token punctuation">,</span>
            <span class="token single-quoted-string string">'Another line'</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// Invoice options (same as 1st parameter of `invoice`)</span>
    <span class="token punctuation">[</span>
       <span class="token single-quoted-string string">'description'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Lifetime license for my product'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Do the invoice handling like documented at the `invoice` method.</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/laravel/cashier-mollie/edit/master/docs/04-oneoffcharges.md" target="_blank" rel="noopener noreferrer">Improve this page (submit a PR)</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/20/2021, 2:15:52 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/cashier-mollie/03-trials.html" class="prev">
        Subscription Trials
      </a></span> <span class="next"><a href="/cashier-mollie/05-metered.html">
        Metered billing
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/cashier-mollie/assets/js/app.50899b51.js" defer></script><script src="/cashier-mollie/assets/js/2.f1cc6911.js" defer></script><script src="/cashier-mollie/assets/js/12.52303bc0.js" defer></script><script src="/cashier-mollie/assets/js/3.c5a105dd.js" defer></script>
  </body>
</html>
